version: '3.8'

services:
  # Backend – Pulls from your Docker Hub
  seedbox-backend:
    image: rahulrajparida/backend:latest   # Your image on Docker Hub
    container_name: seedbox-backend
    restart: unless-stopped
    ports:
      - "${BACKEND_PORT:-3001}:3001"
    env_file:
      - .env.docker
    volumes:
      - seedbox_data:/app/data
      - seedbox_cache:/app/cache
    networks:
      - seedbox-network

  # Frontend – Pulls from your Docker Hub
  seedbox-frontend:
    image: rahulrajparida/frontend:latest   # Your image on Docker Hub
    container_name: seedbox-frontend
    restart: unless-stopped
    ports:
      - "${FRONTEND_PORT:-80}:80"        # Now using port 80 → 80 (cleaner)
    environment:
      - VITE_API_BASE_URL=${VITE_API_BASE_URL:-http://seedbox-backend:3001}
      # or just rely on .env file if you prefer
    depends_on:
      - seedbox-backend
    networks:
      - seedbox-network

volumes:
  seedbox_data:
    driver: local
  seedbox_cache:
    driver: local

networks:
  seedbox-network:
    driver: bridge
